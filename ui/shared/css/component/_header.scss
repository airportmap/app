@use '../abstract/effect';
@use '../abstract/mixin';
@use '../abstract/theme';
@use '../abstract/vars';

@use './searchbar';

.__apm_header {
    @include mixin.prevent-select;
    @include mixin.position( sticky, 0 );
    @include mixin.border( 'gray-30', $bottom: 1px );
    width: 100%;
    padding: 0 vars.get( 'padding-normal' );
    background: theme.get( 'gray-10' );
    box-shadow: 0 24px 16px -16px rgba( 0 0 0 / 0.02 );
    z-index: 1000;

    &__container {
        @include mixin.flex-row( vars.get( 'padding-wide' ), space-between );
        @include mixin.max-width( 'content-wide' );
        height: vars.get( 'header-height' );
    }

    &__site {

        &_title {
            @include mixin.flex-row( 12px );

            object, image {
                @include mixin.prevent-events;
            }

        }

        &_logo {
            height: 40px;
        }

        &_wordmark {
            @include mixin.hide-at( 'normal' );
            height: 20px;
        }

    }

    &__center {
        flex: 1;

        @include mixin.layout-max( 'mobile' ) {
            @include mixin.position( fixed, 0, 0, 0 );
            @include mixin.flex-col;
            @include mixin.transition( 'transform' );
            @include effect.slide-in( -100%, $dir: 'Y' );
            height: vars.get( 'header-height' );
            padding: 0 vars.get( 'padding-small' );
            background: theme.get( 'gray-10' );
            z-index: 1001;
        }

    }

    &__actions {
        @include mixin.flex-row( 8px );

        &_item {
            position: relative;
        }

        &_dropdown {
            @include mixin.position( absolute, calc( 100% + 20px ), 50% );
            @include mixin.flex-col( 4px );
            @include mixin.border( 'gray-30', 1px );
            @include mixin.transition( 'opacity' );
            @include effect.fade-in;
            min-width: 120px;
            padding: vars.get( 'padding-tiny' );
            background: theme.get( 'gray-10' );
            border-radius: vars.get( 'border-radius' );
            box-shadow: 0 8px 32px rgba( 0 0 0 / 0.08 );
            z-index: 1001;
            transform: translateX( -50% );

            @include mixin.after {
                @include mixin.position( absolute, -9px, calc( 50% - 9px ) );
                @include mixin.ratio-width( 16px );
                @include mixin.border( 'gray-30', $top: 1px, $left: 1px );
                background: theme.get( 'gray-10' );
                transform: rotate( 45deg );
            }

            button {
                @include mixin.font-inherit;
                @include mixin.transparent;
                @include mixin.transition;
                width: 100%;
                height: 36px;
                white-space: nowrap;
                text-align: left;
                font-size: 14px;
                padding: 0 12px;
                border-radius: 8px;
                z-index: 1;
                cursor: pointer;

                &:hover {
                    background: theme.get( 'gray-30' );
                }

                &.___active {
                    color: theme.get( 'contrast' );
                    background: theme.get( 'primary' );
                }

            }

        }

        [data-selector="#search"] {
            @include mixin.show-at( 'mobile' );
        }

    }

    @include mixin.layout-max( 'small' ) {
        padding: 0 vars.get( 'padding-small' );

        &__container {
            gap: vars.get( 'padding-normal' );
        }

    }

}
