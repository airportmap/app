include ./assets

mixin menu( items, opts )
  -
    var current = opts && opts.current || site && site.path || '/';
    var classes = [ '__apm_menu' ];
    if ( opts && opts.classes ) classes.push( opts.classes );

  nav( class= classes.join( ' ' ), role= "menu", aria-label= opts && opts.aria || "Menu" )
    ul.__apm_menu__list
      each item in items
        -
          var isActive = ( item.href && current && ( current === item.href || current.startsWith( item.href + '/' ) ) );
        li.__apm_menu__item( class= isActive ? "___active" : "", role= "menuitem" )
          a.__apm_menu__link( href= item.href, title= item.label )
            if item.icon
              +icon( item.icon )
            span= item.label

mixin dashboard()
  div.__apm_dashboard
    div.__apm_dashboard__row
      span.__apm_dashboard__label= fn.i18n( 'app.generic:theme' )
      button.__apm_dashboard__theme(
        aria-label= "Light Theme", data-theme= "light",
        class= ( app.theme === 'light' ? '___active' : '' ),
        title= fn.i18n( 'app.generic:theme.light' )
      )
        +icon( 'light' )
      button.__apm_dashboard__theme(
        aria-label= "Dark Theme", data-theme= "dark",
        class= ( app.theme === 'dark' ? '___active' : '' ),
        title= fn.i18n( 'app.generic:theme.dark' )
      )
        +icon( 'dark' )

    div.__apm_dashboard__row
      span.__apm_dashboard__label= fn.i18n( 'app.generic:locale' )
      select.__apm_dashboard__locale( aria-label= "Language Selector", name= "locale" )
        each l in app.supportedLngs
          option( value= l.code, selected= l.code === app.locale )= l.label